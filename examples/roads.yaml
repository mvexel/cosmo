# Road network extraction using the filter DSL
#
# This extracts major roads (motorway through tertiary, plus *_link variants).
# Ways are output as linestrings; nodes and relations are excluded.

table:
  name: roads
  # DSL filter: highway must be one of the major road types
  # The *_link glob pattern matches motorway_link, trunk_link, etc.
  filter: 'highway=motorway|trunk|primary|secondary|tertiary|*_link'

  geometry:
    way: linestring
    closed_way: linestring
    node: false
    relation: false

  columns:
    - name: name
      source: tag:name
      type: string

    - name: ref
      source: tag:ref
      type: string

    - name: lanes
      source: tag:lanes
      type: integer

    - name: maxspeed
      source: tag:maxspeed
      type: string

    - name: highway_type
      source: tag:highway
      type: string

    - name: oneway
      source: tag:oneway
      type: string

    # OSM metadata fields
    - name: user_name
      source: meta:user
      type: string

    - name: user_id
      source: meta:uid
      type: integer

    - name: version
      source: meta:version
      type: integer

    - name: edited_at
      source: meta:timestamp
      type: string